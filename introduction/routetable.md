

# 路由表简介

## 名词解释
**默认路由表**：创建VPC时系统默认为VPC创建的路由表。新创建的子网将默认绑定默认路由表。默认路由表不允许删除、编辑，默认路由表中的规则均为系统路由。

**自定义路由表**：用户自主创建的路由表，并可自定义添加路由规则。自定义路由表可以创建、删除、编辑。注意，自定义路由表中的系统路由仅允许查看，不允许编辑。

**系统路由**：系统默认为路由表添加的路由规则。系统路由仅允许查看。

**自定义路由**：用户自定义的路由规则。路由规则包括目的地址、下一跳类型和下一跳。自定义路由可以添加、编辑、删除。路由表生效粒度为子网。每个子网必须要绑定且只能绑定一张路由表，一张路由表可被多个子网绑定。


## 路由规则类型 路由表规则的下一跳类型枚举如下：

| 下一跳类型    | 下一跳                      | 说明                                                              |
| -------- | ------------------------ | --------------------------------------------------------------- |
| LOCAL    | LOCAL                    | 系统路由，每个VPC内的网段都会添加一条LOCAL路由，标明VPC内默认可通                          |
| VPC互通    | vnet id               | 系统路由，VPC打通后系统默认添加                                               |
| 外网网关     | 外网网关                     | 系统路由，指定公网的出口。如果云资源绑定了EIP，则默认出口到EIP；否则如果子网绑定了NAT网关，则默认出口到NAT网关。  |
| 公共服务     | 公共服务                     | 系统路由，指向UCloud提供的DNS、YUM源，以及ULB的代理地址、健康检查地址等                     |
| CUSTOM   | CUSTOM                   | 系统路由，UCloud内部特殊服务，如UAEK等业务用                                     |
| IPSecVPN | vpngw id              | 自定义路由，使用IPSec VPN产品后，VPC内添加的指向IPSecVPN网关的路由。目前系统会自动添加，暂时不允许客户添加 |
| 内网VIP    | vip id                | 自定义路由，下一跳为VIP                                                   |
| 实例       | uhost id（phost id） | 自定义路由，下一跳为云主机或者物理云主机                                            |

## 使用限制：

1、路由规则中目的地址网段可以重叠，但是不能完全相同。如果同时匹配多条路由规则中的目的地址，优先级按照最长前缀匹配的算法确定。 

2、自定义路由规则支持添加的下一跳类型为内网VIP和实例（云主机、物理云主机）。

3、默认路由表不可添加自定义路由规则，如需要自定义规则，可创建自定义路由表并添加自定义路由规则。

4、每张路由表最多支持50条自定义路由规则。
